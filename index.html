<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Spin Dana Kaget PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#6a11cb,#2575fc);
  color:#fff; text-align:center; padding:30px 10px;
}
.card {background: rgba(0,0,0,0.3);border-radius:18px;padding:25px;max-width:360px;margin:auto;}
h1 {margin-bottom:5px;}
#wheel {font-size:26px;margin:25px 0;height:40px;}
button {background:#ffcc00;color:#000;border:none;padding:15px 30px;border-radius:30px;font-size:16px;font-weight:bold;cursor:pointer;}
button:disabled {opacity:0.6;cursor:not-allowed;}
.result {margin-top:20px;font-size:18px;}
a {color:#ffcc00;font-weight:bold;text-decoration:none;}
.timer {margin-top:15px;font-size:14px;}
input {padding:8px;border-radius:6px;border:none;margin:5px 0;}
.admin-panel {background: rgba(0,0,0,0.5); padding:20px; border-radius:12px; margin-top:20px;}
</style>
</head>
<body>
<div class="card">
<h1>ðŸŽ¡ SPIN DANA KAGET PRO</h1>
<p>Spin & menangkan hadiah! Kuota terbatas!</p>

<div id="wheel">Siap diputar...</div>
<button id="spinBtn" onclick="spin()">SPIN SEKARANG</button>

<div class="result" id="result"></div>
<div class="timer" id="timer"></div>

<div class="admin-panel" id="adminPanel" style="display:none;">
<h2>Admin Panel</h2>
<p>Password: <input type="password" id="adminPass" placeholder="Masukkan password"> <button onclick="loginAdmin()">Login</button></p>
<div id="adminControls" style="display:none;">
<p>Ubah link hadiah:</p>
Rp1000: <input type="text" id="link1000"><br>
Rp500: <input type="text" id="link500"><br>
Rp200: <input type="text" id="link200"><br>
<button onclick="updateLinks()">Simpan</button>
<p><button onclick="resetKuota()">Reset Kuota</button></p>
</div>
</div>
</div>

<script>
// ====== PENGATURAN ======
const adminPassword = "admin123";
let adminLogged = false;

// Kuota hadiah
let prizes = [
  { name: "Rp1000", limit: 3, link: "https://link.dana.id/1000", won: 0 },
  { name: "Rp500", limit: 5, link: "https://link.dana.id/500", won: 0 },
  { name: "Rp200", limit: 10, link: "https://link.dana.id/200", won: 0 },
  { name: "Zonk", limit: Infinity, link: null, won: 0 }
];

const spinKey = "spinDone";

// ====== SPIN ======
function spin(){
  const btn = document.getElementById("spinBtn");
  const wheel = document.getElementById("wheel");
  const result = document.getElementById("result");
  btn.disabled = true;
  result.innerHTML = "";

  if(localStorage.getItem(spinKey)){
    result.innerHTML = "âŒ Kamu sudah spin!";
    return;
  }

  let count = 0;
  const interval = setInterval(()=>{
    const random = prizes[Math.floor(Math.random()*prizes.length)];
    wheel.textContent = random.name;
    count++;
    if(count>25){
      clearInterval(interval);
      const prize = getPrize();
      wheel.textContent = prize.name;
      showResult(prize);
      localStorage.setItem(spinKey,true);
      btn.disabled=false;
    }
  },100);
}

// Ambil hadiah random dengan cek kuota
function getPrize(){
  let available = prizes.filter(p=>p.won<p.limit);
  if(available.length===0) return {name:"Zonk",link:null};
  const choice = available[Math.floor(Math.random()*available.length)];
  choice.won++;
  return choice;
}

// Tampilkan hasil
function showResult(prize){
  const result = document.getElementById("result");
  if(prize.link){
    result.innerHTML = `ðŸŽ‰ Kamu dapat <b>${prize.name}</b><br><a href="${prize.link}" target="_blank">ðŸ‘‰ KLAIM DANA KAGET</a>`;
  } else {
    result.innerHTML = "ðŸ˜¢ ZONK, coba lagi lain kali!";
  }
}

// ====== ADMIN PANEL ======
function loginAdmin(){
  const pass = document.getElementById("adminPass").value;
  if(pass===adminPassword){
    adminLogged = true;
    document.getElementById("adminControls").style.display="block";
    alert("Login admin berhasil!");
    // load link current
    document.getElementById("link1000").value=prizes[0].link;
    document.getElementById("link500").value=prizes[1].link;
    document.getElementById("link200").value=prizes[2].link;
  } else {
    alert("Password salah!");
  }
}

function updateLinks(){
  if(!adminLogged) return;
  prizes[0].link = document.getElementById("link1000").value;
  prizes[1].link = document.getElementById("link500").value;
  prizes[2].link = document.getElementById("link200").value;
  alert("Link hadiah diperbarui!");
}

function resetKuota(){
  if(!adminLogged) return;
  prizes.forEach(p=>p.won=0);
  localStorage.removeItem(spinKey);
  alert("Kuota hadiah & spin user telah di-reset!");
}

// Tampilkan admin panel
document.getElementById("adminPanel").style.display="block";
</script>
</body>
</html>